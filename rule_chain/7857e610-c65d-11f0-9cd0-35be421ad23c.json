{
  "entityType" : "RULE_CHAIN",
  "entity" : {
    "additionalInfo" : {
      "description" : ""
    },
    "configuration" : null,
    "debugMode" : false,
    "externalId" : null,
    "firstRuleNodeId" : {
      "entityType" : "RULE_NODE",
      "id" : "177b6cf0-ca4e-11f0-b9be-a7eb49293647"
    },
    "id" : {
      "entityType" : "RULE_CHAIN",
      "id" : "7857e610-c65d-11f0-9cd0-35be421ad23c"
    },
    "name" : "Reconstruir_en_TB",
    "root" : false,
    "type" : "CORE"
  },
  "metaData" : {
    "connections" : [ {
      "fromIndex" : 1,
      "toIndex" : 12,
      "type" : "Failure"
    }, {
      "fromIndex" : 1,
      "toIndex" : 12,
      "type" : "Success"
    }, {
      "fromIndex" : 2,
      "toIndex" : 7,
      "type" : "ultimo"
    }, {
      "fromIndex" : 3,
      "toIndex" : 1,
      "type" : "Success"
    }, {
      "fromIndex" : 4,
      "toIndex" : 16,
      "type" : "parte"
    }, {
      "fromIndex" : 5,
      "toIndex" : 2,
      "type" : "Success"
    }, {
      "fromIndex" : 7,
      "toIndex" : 15,
      "type" : "Success"
    }, {
      "fromIndex" : 12,
      "toIndex" : 13,
      "type" : "Success"
    }, {
      "fromIndex" : 13,
      "toIndex" : 5,
      "type" : "true"
    }, {
      "fromIndex" : 14,
      "toIndex" : 4,
      "type" : "Success"
    }, {
      "fromIndex" : 15,
      "toIndex" : 0,
      "type" : "Success"
    }, {
      "fromIndex" : 16,
      "toIndex" : 3,
      "type" : "estaciones"
    }, {
      "fromIndex" : 16,
      "toIndex" : 17,
      "type" : "simulador"
    }, {
      "fromIndex" : 17,
      "toIndex" : 18,
      "type" : "Success"
    } ],
    "firstNodeIndex" : 14,
    "nodes" : [ {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1559,
        "layoutY" : 630
      },
      "configuration" : {
        "version" : 0
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : null,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bf0f3b30-c65d-11f0-9cd0-35be421ad23c"
      },
      "name" : "Salida 1",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.flow.TbRuleChainOutputNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 568,
        "layoutY" : 370
      },
      "configuration" : {
        "tellFailureIfAbsent" : true,
        "fetchTo" : "DATA",
        "clientAttributeNames" : [ ],
        "sharedAttributeNames" : [ ],
        "serverAttributeNames" : [ "buffer" ],
        "latestTsKeyNames" : [ ],
        "getLatestValueWithTs" : false
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764109219785,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "36345470-c65e-11f0-9cd0-35be421ad23c"
      },
      "name" : "buffer",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetAttributesNode"
    }, {
      "additionalInfo" : {
        "description" : "msg.buffer.parte == msg.buffer.total",
        "layoutX" : 742,
        "layoutY" : 621
      },
      "configuration" : {
        "scriptLang" : "TBEL",
        "jsScript" : "function nextRelation(metadata, msg) {\n    return ['one','nine'];\n}\nif(msgType === 'POST_TELEMETRY_REQUEST') {\n    return ['two'];\n}\nreturn nextRelation(metadata, msg);",
        "tbelScript" : "function nextRelation(metadata, msg) {\n    \n    if(msg.buffer.parte == msg.buffer.total) {\n        return ['ultimo'];\n    }\n    else {\n        return ['aun no es el ultimo'];\n    }\n}\n\nreturn nextRelation(metadata, msg);"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764109219785,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "7aa9f6f0-c65e-11f0-9cd0-35be421ad23c"
      },
      "name" : "es el ultimo trozo?",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsSwitchNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 285,
        "layoutY" : 368
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "var msgout = {};\nmsgout.buffer=msg;\n\nreturn {msg: msgout, metadata: metadata, msgType: 'POST_ATTRIBUTES_REQUEST'};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764109219785,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "89b3a880-c663-11f0-9cd0-35be421ad23c"
      },
      "name" : "msgout.buffer=msg;",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "tiene la variable parte ?",
        "layoutX" : 624,
        "layoutY" : 154
      },
      "configuration" : {
        "scriptLang" : "TBEL",
        "jsScript" : "function nextRelation(metadata, msg) {\n    return ['one','nine'];\n}\nif(msgType === 'POST_TELEMETRY_REQUEST') {\n    return ['two'];\n}\nreturn nextRelation(metadata, msg);",
        "tbelScript" : "function nextRelation(metadata, msg) {\n    \n    if(msg.parte != null) {\n        return ['parte'];\n    }\n    else {\n        return ['noo'];\n    }\n}\n\nreturn nextRelation(metadata, msg);"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764105110463,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "623982c0-c668-11f0-9cd0-35be421ad23c"
      },
      "name" : "FILTRO_parte",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsSwitchNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1522,
        "layoutY" : 363
      },
      "configuration" : {
        "processingSettings" : {
          "type" : "ON_EVERY_MESSAGE"
        },
        "scope" : "SERVER_SCOPE",
        "notifyDevice" : false,
        "sendAttributesUpdatedNotification" : false,
        "updateAttributesOnlyOnValueChange" : true
      },
      "configurationVersion" : 3,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764109219785,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "a928e590-c66d-11f0-9cd0-35be421ad23c"
      },
      "name" : "completando atributo",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgAttributesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1556,
        "layoutY" : 700
      },
      "configuration" : {
        "defaultTTL" : 0,
        "useServerTs" : false,
        "processingSettings" : {
          "type" : "ON_EVERY_MESSAGE"
        }
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1763766630910,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "89cc5fa0-c66e-11f0-9cd0-35be421ad23c"
      },
      "name" : "save",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1013,
        "layoutY" : 629
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "// Clonar los objetos para evitar problemas\nvar newMsg = {};\n\nif (msg.buffer) {\n    for (var key in msg.buffer) {\n        newMsg[key] = msg.buffer[key];\n    }\n}\n\n\n\n\n\nreturn {msg: newMsg, metadata: metadata, msgType: 'POST_TELEMETRY_REQUEST'};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764109219785,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "7fb67cd0-c673-11f0-9cd0-35be421ad23c"
      },
      "name" : "convert TELEMETRY",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 101,
        "layoutY" : 762
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "// Clonar los objetos para evitar problemas\r\nvar newMsg = {};\r\n\r\nif (msg.buffer) {\r\n    for (var key in msg.buffer) {\r\n        newMsg[key] = msg.buffer[key];\r\n    }\r\n}\r\n\r\nif (msg.ss_buffer) {\r\n    for (var key in msg.ss_buffer) {\r\n        newMsg[key] = msg.ss_buffer[key];\r\n    }\r\n}\r\n\r\n// Devolver el mensaje como JSON real\r\nreturn {\r\n    msg: newMsg,\r\n    metadata: metadata,\r\n    msgType: msgType\r\n};\r\n",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1763743253744,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "c0352c10-c6f6-11f0-9cd0-35be421ad23c"
      },
      "name" : "sauna1_sumar",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 101,
        "layoutY" : 818
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "var newMsg = {};\n\n\n\n\n\n\n\n// Primero copiar ss_buffer\nif (msg.ss_buffer) {\n    for (var key in msg.ss_buffer) {\n        newMsg[key] = msg.ss_buffer[key];\n    }\n}\n\n// Luego copiar buffer con prioridad\nif (msg.buffer) {\n    for (var key in msg.buffer) {\n\n        // Si ambos tienen el mismo atributo\n        if (newMsg.hasOwnProperty(key)) {\n\n            // Si sus valores son iguales → no hacer nada, dejar existente\n            if (newMsg[key] === msg.buffer[key]) {\n                continue;\n            }\n\n            // Si sus valores son diferentes → usar el de buffer\n            newMsg[key] = msg.buffer[key];\n\n        } else {\n            // Si no existe en uno, agregar normal\n            newMsg[key] = msg.buffer[key];\n        }\n    }\n}\n\n\n\n\nreturn {msg: newMsg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1763744069578,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "a67b68a0-c6f8-11f0-9cd0-35be421ad23c"
      },
      "name" : "sauna2_suma_filtrar",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 107,
        "layoutY" : 698
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "// Clonar los objetos para evitar problemas\r\nvar newMsg = {};\r\n\r\nnewMsg=msg;\r\n\r\n// Devolver el mensaje como JSON real\r\nreturn {\r\n    msg: newMsg,\r\n    metadata: metadata,\r\n    msgType: msgType\r\n};\r\n",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1763746034347,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "39935db0-c6fd-11f0-9cd0-35be421ad23c"
      },
      "name" : "sauna_igual",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 96,
        "layoutY" : 875
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "var result = {};\r\n\r\n// Nuevo objeto buffer combinado\r\nvar newBuffer = {};\r\n\r\n// Primero: copiar atributos de ss_buffer\r\nif (msg.ss_buffer) {\r\n    for (var key in msg.ss_buffer) {\r\n        newBuffer[key] = msg.ss_buffer[key];\r\n    }\r\n}\r\n\r\n// Segundo: copiar atributos de buffer con prioridad\r\nif (msg.buffer) {\r\n    for (var key in msg.buffer) {\r\n\r\n        // Si existe en ambos\r\n        if (newBuffer.hasOwnProperty(key)) {\r\n\r\n            // Si valores son iguales → no hacer nada (dejar ss_buffer)\r\n            if (newBuffer[key] === msg.buffer[key]) {\r\n                continue;\r\n            }\r\n\r\n            // Si valores son distintos → gana buffer\r\n            newBuffer[key] = msg.buffer[key];\r\n\r\n        } else {\r\n            // Si no existe → agregar\r\n            newBuffer[key] = msg.buffer[key];\r\n        }\r\n    }\r\n}\r\n\r\n// Devolver el resultado envuelto en \"buffer\"\r\nresult.buffer = newBuffer;\r\n\r\nreturn {\r\n    msg: result,\r\n    metadata: metadata,\r\n    msgType: msgType\r\n};\r\n",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1763746034347,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "39935db1-c6fd-11f0-9cd0-35be421ad23c"
      },
      "name" : "sauna3_buffer_sumar_filtrar",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "suma el msg actual y el anterior si son del mismo mensaje, caso contrario deja pasar el ultimo mensaje",
        "layoutX" : 930,
        "layoutY" : 368
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "var result = {};\r\n\r\n// 1. Si ss_buffer no existe → devolver solo buffer\r\n// no existe porque seria el primer dato en llegar y pues entonces ss_buffer esta vacio\r\nif (!msg.ss_buffer) {\r\n    \r\n    // si es la primera parte de un mensaje\r\n    if(msg.buffer.parte==1){\r\n        msg.buffer.diff=\"true\";\r\n    }\r\n    else{\r\n        msg.buffer.diff=\"false\";\r\n    }\r\n    msg.buffer.test=1;\r\n    \r\n    result.buffer = msg.buffer || {};\r\n    \r\n    \r\n    return {\r\n        msg: result,\r\n        metadata: metadata,\r\n        msgType: msgType\r\n    };\r\n}\r\n\r\n\r\n\r\n//aca ya existe ss_buffer \r\n// 2. asi que se va a Verificar la variable names que es el id del mensaje\r\n\r\n\r\n\r\n// Si variable names difieren → NO fusionar (solo devolver buffer)\r\n\r\nif (msg.buffer.names !== msg.ss_buffer.names) {\r\n    \r\n     // si es la primera parte de un mensaje\r\n    if(msg.buffer.parte==1){\r\n        msg.buffer.diff=\"true\";\r\n    }\r\n    else{\r\n        msg.buffer.diff=\"false\";\r\n    }\r\n    \r\n    msg.buffer.test=2;\r\n    result.buffer = msg.buffer || {};\r\n    \r\n    \r\n    return {\r\n        msg: result,\r\n        metadata: metadata,\r\n        msgType: msgType\r\n    };\r\n}\r\n\r\n// si la variable names son iguales\r\n// 3. nsmesiguales → realizar fusión\r\nelse if(msg.buffer.names == msg.ss_buffer.names){\r\n\r\n\r\nvar newBuffer = {};\r\n\r\n// Copiar primero ss_buffer\r\nfor (var key in msg.ss_buffer) {\r\n    newBuffer[key] = msg.ss_buffer[key];\r\n}\r\n\r\n\r\n\r\n\r\n// Fusionar buffer con prioridad en conflicto\r\nfor (var key in msg.buffer) {\r\n\r\n    if (newBuffer.hasOwnProperty(key)) {\r\n\r\n        // Si valores iguales → dejar el de ss_buffer\r\n        if (newBuffer[key] === msg.buffer[key]) {\r\n            continue;\r\n        }\r\n\r\n        // Si valores distintos → gana buffer\r\n        newBuffer[key] = msg.buffer[key];\r\n\r\n    } else {\r\n        // Si no existe → agregar\r\n        newBuffer[key] = msg.buffer[key];\r\n    }\r\n}\r\n\r\n\r\n//if(msg.ss_buffer.diff==\"true\" && (msg.buffer.parte - msg.ss_buffer.parte)==1 )\r\n\r\nif(msg.ss_buffer.diff==\"true\" && (msg.buffer.parte - msg.ss_buffer.parte)==1){\r\n    newBuffer.diff=\"true\";\r\n}\r\n\r\nelse{\r\n    newBuffer.diff=\"false\";\r\n}\r\n\r\n\r\nnewBuffer.test=3;\r\n\r\n\r\nresult.buffer = newBuffer;\r\n\r\nreturn {\r\n    msg: result,\r\n    metadata: metadata,\r\n    msgType: msgType\r\n};\r\n\r\n}",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764109219785,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "399384c0-c6fd-11f0-9cd0-35be421ad23c"
      },
      "name" : "sauna4",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "msg.buffer.parte == msg.buffer.total",
        "layoutX" : 1238,
        "layoutY" : 360
      },
      "configuration" : {
        "scriptLang" : "TBEL",
        "jsScript" : "function nextRelation(metadata, msg) {\n    return ['one','nine'];\n}\nif(msgType === 'POST_TELEMETRY_REQUEST') {\n    return ['two'];\n}\nreturn nextRelation(metadata, msg);",
        "tbelScript" : "function nextRelation(metadata, msg) {\n    \n    if(msg.buffer.diff == \"true\") {\n        return ['true'];\n    }\n    else {\n        return ['false'];\n    }\n}\n\nreturn nextRelation(metadata, msg);"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764109219785,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "afaca0e0-c72c-11f0-9cd0-35be421ad23c"
      },
      "name" : "se perdio mensaje?",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsSwitchNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 319,
        "layoutY" : 154
      },
      "configuration" : {
        "version" : 0
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764268056993,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "177b6cf0-ca4e-11f0-b9be-a7eb49293647"
      },
      "name" : "Cola secuencial",
      "queueName" : "SequentialByOriginator",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.flow.TbCheckpointNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1282,
        "layoutY" : 627
      },
      "configuration" : {
        "version" : 0
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764267526379,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "177b6cf1-ca4e-11f0-b9be-a7eb49293647"
      },
      "name" : "Cola Normal",
      "queueName" : "Main",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.flow.TbCheckpointNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 933,
        "layoutY" : 164
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "function nextRelation(metadata, msg) {\n    \n    if(metadata.deviceName == \"Estación 1.0\" || metadata.deviceName == \"Estación 1.1\" \n    || metadata.deviceName == \"Estación 1.2\" || metadata.deviceName == \"Estación 1.3\"\n    || metadata.deviceName == \"Estación 1.4\" || metadata.deviceName == \"Estación 1.5\"\n    || metadata.deviceName == \"Estación 1.6\" || metadata.deviceName == \"Estación 1.7\"\n    || metadata.deviceName == \"Estación 1.8\" || metadata.deviceName == \"Estación 1.9\") {\n        return ['estaciones'];\n    }\n    else if (metadata.deviceName == \"PruebaSimulador\"){\n        return ['simulador'];\n    }\n    else {\n        return ['noo'];\n    }\n}\n\nreturn nextRelation(metadata, msg);",
        "tbelScript" : "function nextRelation(metadata, msg) {\n    return ['one','nine'];\n}\nif(msgType == 'POST_TELEMETRY_REQUEST') {\n    return ['two'];\n}\nreturn nextRelation(metadata, msg);"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : null,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "f7d67cf0-cbba-11f0-b9be-a7eb49293647"
      },
      "name" : "filtro estaciones",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsSwitchNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1280,
        "layoutY" : 166
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "return {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "return {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugSettings" : {
        "allEnabled" : false,
        "allEnabledUntil" : 1764267526379,
        "failuresEnabled" : true
      },
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "3833d810-cbbb-11f0-b9be-a7eb49293647"
      },
      "name" : "debug simulador",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 1573,
        "layoutY" : 172
      },
      "configuration" : {
        "defaultTTL" : 0,
        "useServerTs" : false,
        "processingSettings" : {
          "type" : "ON_EVERY_MESSAGE"
        }
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugSettings" : null,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "dc5387b0-cbbb-11f0-b9be-a7eb49293647"
      },
      "name" : "save debug",
      "queueName" : null,
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode"
    } ],
    "ruleChainConnections" : null
  },
  "relations" : [ {
    "additionalInfo" : null,
    "from" : {
      "entityType" : "RULE_CHAIN",
      "id" : "67a610a0-8f1f-11f0-a61c-01e0c85fd5dd"
    },
    "to" : {
      "entityType" : "RULE_CHAIN",
      "id" : "7857e610-c65d-11f0-9cd0-35be421ad23c"
    },
    "type" : "Uses",
    "typeGroup" : "COMMON",
    "version" : 233931
  } ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}